---
const { title = "EmbeddedTech", description = "Yocto, Zephyr, Embedded Linux & hardware", hideHeader = false } = Astro.props;
---
<html lang="fr" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <link rel="icon" href="/logo1.png" />
    <title>{title}</title>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml" />
    <style is:global>@import '/src/styles/global.css';</style>
  </head>
  <body class="min-h-screen flex flex-col">
    {!hideHeader && <header class="border-b border-white/5 sticky top-0 backdrop-blur supports-[backdrop-filter]:bg-white/5 z-50">
      <div class="container py-3 flex items-center justify-between">
        <a href="/" class="font-semibold tracking-tight text-teal-300">EmbeddedTech</a>
        <nav class="flex items-center gap-6 text-sm">
          <a class="hover:opacity-80" href="/">Home</a>
          <a class="hover:opacity-80" href="/projects">Projects</a>
          <a class="hover:opacity-80" href="/about">About me</a>
          <a class="hover:opacity-80" href="/search">üîé</a>
          <button id="theme-toggle" class="px-2 py-1 rounded-xl border border-white/10">‚òÄÔ∏è</button>
        </nav>
      </div>
    </header>}
    <main class="flex-1"><slot /></main>
    <footer class="border-t border-white/5">
      <div class="container py-12 grid md:grid-cols-4 gap-8 text-sm">
        <div>
          <div class="font-semibold text-teal-300">EmbeddedTech</div>
          <p class="text-white/70 mt-2">Resources and tutorials on embedded systems, Yocto, Zephyr and embedded Linux.</p>
          <div class="flex gap-3 mt-3">
            <a aria-label="GitHub" class="btn" href="https://github.com/BarthYer"><span>GitHub</span></a>
            <a aria-label="Twitter" class="btn" href="https://twitter.com/"><span>Twitter</span></a>
            <a aria-label="Linkedin" class="btn" href="www.linkedin.com/in/barth√©l√©my-yerbanga-40a973161"><span>Linkedin</span></a>
          </div>
        </div>
        <div>
          <div class="font-semibold">Navigation</div>
          <ul class="mt-2 space-y-2">
            <li><a class="hover:underline" href="/">Home</a></li>
            <li><a class="hover:underline" href="/projects">Projects</a></li>
            <li><a class="hover:underline" href="/about">About me</a></li>
            <li><a class="hover:underline" href="/archives">Archives</a></li>
          </ul>
        </div>
        <div>
          <div class="font-semibold">Categories</div>
          <ul class="mt-2 space-y-2">
            <li>Yocto Project</li>
            <li>Zephyr RTOS</li>
            <li>Embedded Linux</li>
            <li>Hardware Development </li>
          </ul>
        </div>
        <div>
          <div class="font-semibold">Newsletter</div>
          <form action="https://buttondown.email/api/emails/embed-subscribe/YOUR_BUTTONDOWN" method="post" target="popupwindow" onsubmit="window.open('https://buttondown.email/YOUR_BUTTONDOWN', 'popupwindow')" class="mt-2 flex gap-2">
            <input type="email" name="email" placeholder="Your email" required class="flex-1 px-3 py-2 rounded-xl bg-transparent border border-white/10" />
            <input type="hidden" value="1" name="embed" />
            <button class="btn">OK</button>
          </form>
          <p class="mt-2 text-white/60">Subscribe via <a class="underline" href="/rss.xml">RSS</a></p>
        </div>
      </div>
      <div class="border-t border-white/5 text-center text-xs py-4 text-white/60">¬© {new Date().getFullYear()} EmbeddedTech</div>
    </footer>
    <script>
      const root = document.documentElement;
      const saved = localStorage.getItem('theme');
      if (saved) root.setAttribute('data-theme', saved);
      const btn = document.getElementById('theme-toggle');
      btn?.addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'dark' ? 'teal-dark' : 'dark';
        root.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
      });
    </script>
  </body>
</html>
